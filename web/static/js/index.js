// Generated by LiveScript 1.3.1
(function(){
  var mypal, save, pals, ret, ldcv, ldpe, ldcvEditor, image, down;
  mypal = new ldPage({
    fetch: function(){
      return ld$.fetch('assets/sample-palettes.json', {}, {
        type: 'json'
      }).then(function(it){
        return it.map(function(it){
          it.payload.colors = it.payload.colors.map(function(it){
            return it.value;
          });
          return import$(it, it.payload);
        });
      });
    }
  });
  save = function(data){
    return new Promise(function(res, rej){
      console.log(data);
      return res();
    });
  };
  ldPalettePicker.register("default2", palettes);
  pals = ldPalettePicker.get("default2");
  ret = ldPalettePicker.init({
    pals: pals,
    useClusterizejs: true,
    mypal: mypal,
    save: save
  });
  window.ldcv = ldcv = new ldCover({
    root: document.querySelector('.ldcv')
  });
  ldpe = new ldPaletteEditor({
    root: '#editor'
  });
  new ldPaletteEditor({
    root: '#ldcv-editor'
  });
  ldcvEditor = new ldCover({
    root: '#ldcv-editor'
  });
  image = function(type){
    type == null && (type = 'png');
    return ldPalette.convert(ldpe.getPal(), type).then(function(ret){
      var out, fr;
      out = document.querySelector('#image-output');
      if (type === 'png' || type === 'svg') {
        return out.innerHTML = "<img src=\"" + ret.url + "\"/>";
      } else {
        fr = new FileReader();
        fr.onload = function(){
          return out.innerHTML = fr.result;
        };
        return fr.readAsText(ret.blob);
      }
    });
  };
  return down = function(type){
    type == null && (type = 'png');
    return ldPalette.download(ldpe.getPal(), type);
  };
})();
function import$(obj, src){
  var own = {}.hasOwnProperty;
  for (var key in src) if (own.call(src, key)) obj[key] = src[key];
  return obj;
}